<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–û—Ü–µ–Ω–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è –ò–Ω–∫–ª–∏—Å–∏—Ä–∞–Ω–∞</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    label, select, input { display: block; margin-top: 10px; width: 100%; }
    .result { margin-top: 20px; padding: 15px; border-radius: 5px; }
    .match { background-color: #e0ffe0; border: 1px solid #4CAF50; }
    .no-match { background-color: #ffe0e0; border: 1px solid #f44336; }
    table { width: 100%; margin-top: 20px; border-collapse: collapse; }
    td, th { border: 1px solid #ccc; padding: 5px; text-align: center; }
    button { margin-top: 15px; padding: 10px; }
  </style>
</head>
<body>
  <h1>–û—Ü–µ–Ω–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ò–Ω–∫–ª–∏—Å–∏—Ä–∞–Ω–∞</h1>

  <label>–§–ò–û –ø–∞—Ü–∏–µ–Ω—Ç–∞:</label>
  <input type="text" id="fio" />

  <label>–õ–ü–ù–ü (–º–º–æ–ª—å/–ª):</label>
  <input type="number" id="ldl" step="0.1" />

  <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∏—Å–∫–∞:</label>
  <select id="risk">
    <option value="–Ω–∏–∑–∫–∏–π">–ù–∏–∑–∫–∏–π</option>
    <option value="—É–º–µ—Ä–µ–Ω–Ω—ã–π">–£–º–µ—Ä–µ–Ω–Ω—ã–π</option>
    <option value="–≤—ã—Å–æ–∫–∏–π">–í—ã—Å–æ–∫–∏–π</option>
    <option value="–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π">–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π</option>
  </select>

  <label>–ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç–∞—Ç–∏–Ω –≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–æ–∑–µ:</label>
  <select id="statin">
    <option value="–Ω–µ—Ç">–ù–µ—Ç</option>
    <option value="–¥–∞">–î–∞</option>
  </select>

  <label>–ü—Ä–∏–Ω–∏–º–∞–µ—Ç —ç–∑–µ—Ç–∏–º–∏–±:</label>
  <select id="ezetimibe">
    <option value="–Ω–µ—Ç">–ù–µ—Ç</option>
    <option value="–¥–∞">–î–∞</option>
  </select>

  <button onclick="evaluate()">–û—Ü–µ–Ω–∏—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞</button>

  <div id="result" class="result"></div>

  <h2>–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç—ã</h2>
  <table id="table">
    <thead>
      <tr><th>–§–ò–û</th><th>–†–∏—Å–∫</th><th>–õ–ü–ù–ü</th><th>–ü–æ–∫–∞–∑–∞–Ω?</th></tr>
    </thead>
    <tbody id="saved"></tbody>
  </table>

  <button onclick="clearPatients()">üóë –û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>

  <script>
    function getTargetLDL(risk) {
      if (risk === "–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π") return 1.4;
      if (risk === "–≤—ã—Å–æ–∫–∏–π") return 1.8;
      return null;
    }

    function evaluate() {
      const fio = document.getElementById("fio").value.trim();
      const ldl = parseFloat(document.getElementById("ldl").value);
      const risk = document.getElementById("risk").value;
      const statin = document.getElementById("statin").value;
      const ezetimibe = document.getElementById("ezetimibe").value;

      if (!fio || isNaN(ldl)) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –§–ò–û –∏ —É—Ä–æ–≤–µ–Ω—å –õ–ü–ù–ü.");
        return;
      }

      const targetLDL = getTargetLDL(risk);
      let eligible = false;
      let explanation = "";

      if (targetLDL === null) {
        explanation = "–ü–∞—Ü–∏–µ–Ω—Ç —Å –Ω–∏–∑–∫–∏–º –∏–ª–∏ —É–º–µ—Ä–µ–Ω–Ω—ã–º —Ä–∏—Å–∫–æ–º ‚Äî –∏–Ω–∫–ª–∏—Å–∏—Ä–∞–Ω –Ω–µ –ø–æ–∫–∞–∑–∞–Ω.";
      } else if (statin === "–¥–∞" && ezetimibe === "–¥–∞" && ldl > targetLDL) {
        eligible = true;
        explanation = "–ü–∞—Ü–∏–µ–Ω—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä–∏—Ç–µ—Ä–∏—è–º: –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è, –õ–ü–ù–ü –≤—ã—à–µ —Ü–µ–ª–µ–≤–æ–≥–æ.";
      } else {
        explanation = "–ü–∞—Ü–∏–µ–Ω—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä–∏—Ç–µ—Ä–∏—è–º: –Ω–µ–¥–æ—Å—Ç–∞—ë—Ç —Ä–∏—Å–∫/—Ç–µ—Ä–∞–ø–∏—è/–õ–ü–ù–ü.";
      }

      document.getElementById("result").className = `result ${eligible ? 'match' : 'no-match'}`;
      document.getElementById("result").innerHTML = `
        <h3>${fio}</h3>
        <p>–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∏—Å–∫–∞: <strong>${risk}</strong></p>
        <p>–õ–ü–ù–ü: <strong>${ldl} –º–º–æ–ª—å/–ª</strong> (–¶–µ–ª—å: ${targetLDL ?? "–Ω–µ —É–∫–∞–∑–∞–Ω–∞"})</p>
        <p>${explanation}</p>
        <p><strong>${eligible ? "‚úÖ –ò–Ω–∫–ª–∏—Å–∏—Ä–∞–Ω –ø–æ–∫–∞–∑–∞–Ω" : "‚ùå –ò–Ω–∫–ª–∏—Å–∏—Ä–∞–Ω –Ω–µ –ø–æ–∫–∞–∑–∞–Ω"}</strong></p>
      `;

      savePatient({ fio, risk, ldl, eligible });
    }

    function savePatient(patient) {
      let list = JSON.parse(localStorage.getItem("patients") || "[]");
      list.push(patient);
      localStorage.setItem("patients", JSON.stringify(list));
      renderSaved();
    }

    function renderSaved() {
      const list = JSON.parse(localStorage.getItem("patients") || "[]");
      const tbody = document.getElementById("saved");
      tbody.innerHTML = list.map(p =>
        `<tr><td>${p.fio}</td><td>${p.risk}</td><td>${p.ldl}</td><td>${p.eligible ? "‚úÖ" : "‚ùå"}</td></tr>`
      ).join("");
    }

    function clearPatients() {
      if (confirm("–£–¥–∞–ª–∏—Ç—å –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞?")) {
        localStorage.removeItem("patients");
        renderSaved();
      }
    }
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–û—Ü–µ–Ω–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞</title>
</head>
<body>
  <h1>–ü–∞—Ü–∏–µ–Ω—Ç—ã</h1>
  <input id="fio" placeholder="–§–ò–û"/>
  <input id="ldl" placeholder="–õ–ü–ù–ü" type="number" step="0.1"/>
  <button onclick="save()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  <ul id="list"></ul>

  <script>
    function load() {
      const data = JSON.parse(localStorage.getItem("patients") || "[]");
      document.getElementById("list").innerHTML = data.map(p =>
        `<li>${p.fio} ‚Äî ${p.ldl} –º–º–æ–ª—å/–ª</li>`).join("");
    }
    // –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    renderSaved();
  </script>
</body>
</html>
